<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>ElefantPay</title>
</head>

<body>

  <div id="result" style="display: none; text-align: center; font-family: Arial, Helvetica, sans-serif">
    <h1>Great!</h1>
    <div style="font-size: large;">
      <div font-weight: 900;">Your credentials are confirmed!</div>
      <div> Start to use your wallet by signing in to the app.</div>
    </div>
  </div>

  <script>

    var args = {};
    if (document.location.toString().indexOf('?') !== -1) {
      var query = document.location.toString()
        .replace(/^.*?\?/, '').replace(/#.*$/, '').split('&');
      for (var i = 0; i < query.length; ++i) {
        var aux = decodeURIComponent(query[i]).split('=');
        args[aux[0]] = aux[1];
      }
    }

    var ver = '';
    if ('ver' in args) {
      ver = '-' + args['ver'];
    }
    var domain = 'api' + ver + '.elefantpay.com';
    var url = 'https://' + domain + '/client/credentials/confirmation';

    var request = new XMLHttpRequest();
    request.open('POST', url, true);

    request.setRequestHeader('Access-Control-Allow-Origin', domain);
    request.setRequestHeader('Access-Control-Allow-Methods', 'POST');
    request.setRequestHeader('Access-Control-Allow-Headers',
      'X-Requested-With,content-type');
    request.setRequestHeader('Access-Control-Allow-Credentials', 'true');
    request.setRequestHeader('Content-Type', 'application/json');

    request.onreadystatechange = function () {
      if (this.readyState != 4) {
        return;
      }
      if (this.status != 204) {
        console.error('Failed to confirm credentials (HTTP status code: '
          + this.status + ') : ' + this.responseText + '.');
      } else {
        console.log('Credentials have been confirmed.');
      }
      document.getElementById('result').style.display = 'block';
    };

    if ('id' in args && 'token' in args) {
      request.send(JSON.stringify({ id: args['id'], token: args['token'] }));
    } else {
      console.error('Bad request.');
    }

  </script>

  <!-- Yandex.Metrika counter -->
  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
  <script type="text/javascript">
    (function (m, e, t, r, i, k, a) {
      m[i] = m[i] || function () { (m[i].a = m[i].a || []).push(arguments) };
      m[i].l = 1 * new Date(); k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
    })
      (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(57127123, "init", {
      clickmap: true,
      trackLinks: true,
      accurateTrackBounce: true,
      webvisor: true
    });
  </script>
  <noscript>
    <div><img src="https://mc.yandex.ru/watch/57127123" style="position:absolute; left:-9999px;" alt="" /></div>
  </noscript>
  <!-- /Yandex.Metrika counter -->

</body>

</html>